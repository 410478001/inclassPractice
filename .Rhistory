"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固"))->NewBank
mutate(allBankData,"銀行"=as.factor("銀行"),
"年月"=as.factor("年月"),
"定存利率-三個月-固定"=as.numeric("定存利率-三個月-固定"),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor("年月"),
"定存利率-三個月-固定"=as.numeric("定存利率-三個月-固定"),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.numeric("定存利率-三個月-固定"),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.numeric(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.numeric(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.character(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.factor(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
View(allBankData)
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.factor(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.factor(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
library(readr)
gsHW2ws <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/gsHW2ws.csv")
mean(gsHW2ws$ans1,na.rm=TRUE)
library(stringr)
which(str_sub(colnames(gsHW2ws),1,3)=="ans")
gsHW2ws$"答對率"<-rowSums(gsHW2ws[which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)/5
gsHW2ws$"成績"<-5+gsHW2ws$"答對率"*5
library(readr)
allBankData <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/allBankData.csv")
correct<-gsHW2ws[which(gsHW2ws$"成績"==8),]
c<-colMeans(correct[which(str_sub(colnames(correct),1,3)=="ans")],na.rm=T)
which(c<0.5)
library(lubridate)
allBankData$"年月"<-str_c("1",allBankData$"年月","/01")
allBankData$"年月"<-ymd(allBankData$"年月")
allBankData$"年月"<-allBankData$"年月"+years(911)
library(dplyr)
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.factor(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric("定存利率-一年期-固定"))->NewBank
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.numeric(定存利率-三個月-固定),
"定存利率-一年期-固定"=as.numeric(定存利率-一年期-固定))->NewBank
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月))->NewBank
View(NewBank)
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
"定存利率-三個月-固定"=as.numeric(定存利率-三個月-固定))->NewBank
mutate(allBankData,"銀行"=as.character(銀行),
"年月"=as.factor(年月),
3=as.numeric(定存利率-三個月-固定))->NewBank
library(dplyr)
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月))->NewBank
library(dplyr)
mutate(allBankData,"銀行"=as.factor(銀行),
"年月"=as.factor(年月))->NewBank
View(NewBank)
mutate(allBankData,"銀行"=as.factor(銀行),"年月"=as.factor(年月))
mutate(allBankData,"銀行"=as.factor(銀行),"年月"=as.factor(年月),
定存利率-三個月-固定=as.numeric(定存利率-三個月-固定))
mutate(allBankData,"銀行"=as.character(銀行),"年月"=as.factor(年月),
)
class(NewBank)
class(NewBank$銀行)
mutate(allBankData,"銀行"=as.character(銀行),"年月"=as.factor(年月),
)
class(NewBank$銀行)
mutate(allBankData,"銀行"=as.character(銀行),"年月"=as.factor(年月)
)
class(NewBank$銀行)
mutate(allBankData,"銀行"=as.character(銀行),"年月"=as.factor(年月))
class(NewBank$銀行)
class(NewBank$年月)
class(NewBank$)
class(NewBank$`定存利率-三個月-固定`)
mutate(allBankData,"銀行"=as.character(`銀行`),"年月"=as.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`) ))
class(NewBank$`定存利率-一年期-固定`)
class(NewBank$銀行)
mutate(allBankData,"銀行"=as.character(`銀行`),"年月"=as.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`) ))->NewBank
class(NewBank$銀行)
class(NewBank)
class(NewBank$銀行)
class(NewBank$)
class(NewBank$年月)
class(NewBank$`定存利率-一年期-固定`)
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
View(exData)
?mutate_at
?mutate
class(allBankData$銀行)
class(allBankData$年月)
class(NewBank$年月)
mutate(allBankData,"銀行"=as.factor(`銀行`),"年月"=as.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`)))
mutate(allBankData,"銀行"=as.factor(`銀行`),"年月"=as.Date.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`)))
mutate(allBankData,"銀行"=as.factor(`銀行`),"年月"=as.Date.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`)))->NewBank
class(NewBank$年月)
View(NewBank)
class(allBankData$年月)
class(NewBank$年月)
class(NewBank$銀行)
class(allBankData$銀行)
library(dplyr)
mutate(allBankData,"銀行"=as.factor(`銀行`),"年月"=as.Date.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`)))->allBankData
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(parse_number(.,locale=cl)))->NewData
View(NewData)
exData%>%mutate_at(vars(starts_with(`新台幣NTD/USD`)),funs(parse_number(.,locale=cl)))->NewData
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(parse_number(.,locale=cl)))->NewData
collegeData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6231&md5_url=dda8fca407131483c1d8cbf3d61cf793")
library(dplyr)
mutate(
collegeData,
學校代碼=as.factor(學校代碼),
學校名稱=as.factor(學校名稱)
) -> collegeData2
View(collegeData)
View(collegeData2)
collegeData %>%
mutate(
`日間∕進修別`=as.factor(`日間∕進修別`),
等級別=as.factor(等級別),
一年級男生=as.numeric(一年級男生),
一年級女生=as.numeric(一年級女生)
) -> collegeData3
View(collegeData3)
library(readr)
cl<-locale(grouping_mark = ",") # 創造cl來描述千分位符號使用","的習慣場景
collegeData %>%
mutate(
`日間∕進修別`=as.factor(`日間∕進修別`),
等級別=as.factor(等級別),
一年級男生=parse_number(一年級男生,locale=cl),
一年級女生=parse_number(一年級女生,locale=cl)
) -> collegeData4
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(parse_number(.,locale=cl)))->NewData
View(exData)
View(NewData)
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(as.factor(x))))->NewData
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(as.factor(x)))->NewData
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(as.factor(.)))->NewData
View(collegeData4)
collegeData4 %>%
mutate(
一年級男生每千人=一年級男生/1000,
一年級女生每千人=一年級女生/1000
) -> collegeData5
View(collegeData5)
collegeData3 %>%
mutate(
一年級男生每千人=一年級男生/1000,
一年級女生每千人=一年級女生/1000
) -> collegeData5
View(collegeData)
View(collegeData3)
View(collegeData2)
library(dplyr)
mutate(
collegeData,
學校代碼=as.factor(學校代碼),
學校名稱=as.factor(學校名稱)
) -> collegeData2
collegeData %>%
mutate(
`日間∕進修別`=as.factor(`日間∕進修別`),
等級別=as.factor(等級別),
一年級男生=as.numeric(一年級男生),
一年級女生=as.numeric(一年級女生)
) -> collegeData3
library(readr)
cl<-locale(grouping_mark = ",") # 創造cl來描述千分位符號使用","的習慣場景
collegeData %>%
mutate(
`日間∕進修別`=as.factor(`日間∕進修別`),
等級別=as.factor(等級別),
一年級男生=parse_number(一年級男生,locale=cl),
一年級女生=parse_number(一年級女生,locale=cl)
) -> collegeData4
View(collegeData4)
collegeData %>%
mutate(
一年級男生每千人=一年級男生/1000,
一年級女生每千人=一年級女生/1000
) -> collegeData5
collegeData4 %>%
mutate(
一年級男生每千人=一年級男生/1000,
一年級女生每千人=一年級女生/1000
) -> collegeData5
View(collegeData5)
View(collegeData)
college1stYearDataA %>%
select(一年級男生,一年級女生)
collegeData %>% mutate_at(
vars(一年級男生,一年級女生),
funs(parse_number(.,locale=cl))
) -> college1stYearDataA
collegeData %>% mutate_at(
vars(一年級男生,一年級女生),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
collegeData %>% mutate_at(
vars(`一年級男生`,`一年級女生`),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
library(dplyr)
collegeData %>% mutate_at(
vars(`一年級男生`,`一年級女生`),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
collegeData %>% mutate_at(
vars(一年級男生,`一年級女生`),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
collegeData %>% mutate_at(
vars(starts_with("一年級")),
funs(parse_number(.,locale=cl))
) -> college1stYearDataB
college1stYearDataB %>%
select(一年級男生,一年級女生)
View(college1stYearDataB)
View(college1stYearDataB)
collegeData %>% mutate_at(
vars(一年級男生),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
collegeData %>% mutate_at(
vars("一年級男生"),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
collegeData %>% mutate_at(
vars("一年級男生","一年級女生"),
funs(parse_number(.,locale=cl))) -> college1stYearDataA
college1stYearDataA %>%
select(一年級男生,一年級女生)
college1stYearDataA %>%
select("一年級男生","一年級女生")
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(as.factor(.)))->NewData
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(as.factor(.)))->NewData
View(exData)
View(NewData)
exData%>%mutate_at(vars("期間"),
funs(as.factor(.)))->NewData
class(NewData$期間)
class(exData$期間)
class(NewData$`新台幣NTD/USD`)
class(NewData$`印尼盾IDR/USD`)
exData%>%mutate_at(vars("期間"),
funs(as.factor(.)),
vars("`印尼盾IDR/USD`"),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(
vars("`印尼盾IDR/USD`"),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(vars("期間"),
funs(as.factor(.)),
vars(`印尼盾IDR/USD`),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(
vars(`印尼盾IDR/USD`),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(
vars("`印尼盾IDR/USD`"),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(
vars("印尼盾IDR/USD"),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(vars("期間"),
funs(as.factor(.)),
vars("印尼盾IDR/USD"),
funs(as.numeric(.)))->NewData
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(1/.))
exData%>%mutate_at(vars(starts_with("`新台幣NTD/USD`")),funs(.*10))
exData%>%mutate_at(vars(starts_with("新台幣NTD/USD")),funs(.*10))
exData%>%mutate_at(vars(starts_with("新台幣NTD/USD")),funs(1/.))
exData%>%mutate_at(vars(contains("/USD")),funs(1/.))
exData%>%mutate_at(vars(contains("USD")),funs(1/.))
exData%>%mutate_at(vars("英鎊USD/GBP"),funs(1/.))
exData%>%mutate_at(vars("英鎊USD/GBP","澳幣USD/AUD"),funs(1/.))
exData%>%mutate_at(vars("英鎊USD/GBP","澳幣USD/AUD","歐元USD/EUR"),funs(1/.))
exData%>%mutate_at(vars("英鎊USD/GBP","澳幣USD/AUD"),funs(1/.))
exData%>%mutate_at(vars("英鎊USD/GBP","澳幣USD/AUD"),funs(1/.))->NewData1
exData%>%mutate_at(vars(contains("USD/")),funs(1/.))
exData%>%mutate_at(vars(starts_with("USD/")),funs(1/.))
exData%>%mutate_at(vars(contains("USD/")),funs(1/.))
exData%>%mutate_at(vars(contains("英鎊USD/GBP")),funs(1/.))
NewData1%>%mutate_at(vars(colnames(contains("USD/"))),funs(str_sub(.,1,2)))
NewData1%>%mutate_at(vars(which(colnames(contains("USD/")))),funs(str_sub(.,1,2)))
NewData1%>%mutate_at(vars(colnames(contains("USD/"))),funs(str_sub(.,1,2)))
NewData1%>%mutate_at(vars(contains("USD/")),funs(str_sub(.,1,2)))
NewData1%>%mutate_at(vars(contains("USD/")),funs(str_sub(colnames(.),1,2)))
NewData1%>%mutate_at(vars(contains("USD/")),funs(str_sub(colnames(NewData1),1,2)))
str_sub(colnames(NewData1),1,2)
NewData1%>%mutate_at(vars(contains("USD/")),funs(replace(str_sub(colnames(NewData1),1,2))))
exData$`印尼盾IDR/USD`<-as.numeric(exData$`印尼盾IDR/USD`)
class(exData$`印尼盾IDR/USD`)
exData%>%mutate_at(vars("期間"),
funs(as.factor(.)),vars("印尼盾IDR/USD"),funs(as.numeric(.)))->NewData
exData%>%mutate_at(vars("印尼盾IDR/USD"),funs(as.numeric(.)))->NewData
View(NewData)
NewData%>%mutate_at(vars(contains("USD")),funs(as.numeric(.)))->NewData
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
exData%>%mutate_at(vars("期間"),funs(as.factor(.)))->NewData
View(NewData)
NewData%>%mutate_at(vars(contains("USD")),funs(as.numeric(.)))->NewData
View(NewData)
NewData%>%mutate_at(vars(contains("USD/")),funs(1/.))->NewData1
NewData1
colnames(NewData$`新台幣NTD/USD`)
library(readr)
gsHW2ws <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/gsHW2ws.csv")
mean(gsHW2ws$ans1,na.rm=TRUE)
library(stringr)
which(str_sub(colnames(gsHW2ws),1,3)=="ans")
colMeans(gsHW2ws[which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=T)
gsHW2ws$"答對率"<-rowSums(gsHW2ws[which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)/5
gsHW2ws$"成績"<-5+gsHW2ws$"答對率"*5
which(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)!=min(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)))
which(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)!=max(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)))
View(gsHW2ws)
?replace
replace(NewData1,which(colnames(contains("USD/"))),str_sub(colnames(NewData1),1,2))
str_sub(colnames(NewData1),1,2)
replace(NewData1[which(colnames(contains("USD/")))],str_sub(colnames(NewData1),1,2))
replace(NewData1,NewData1[which(colnames(contains("USD/")))],str_sub(colnames(NewData1),1,2))
?colnames
m0 <- matrix(NA, 4, 0)
rownames(m0)
m2 <- cbind(1, 1:4)
colnames(m2, do.NULL = FALSE)
colnames(m2) <- c("x","Y")
rownames(m2) <- rownames(m2, do.NULL = FALSE, prefix = "Obs.")
m2
colnames(NewData1[which(colnames(contains("USD/")))])
colnames(NewData1)
NewData1[which(colnames(contains("USD/")))]
colnames(NewData1)<-str_sub(colnames(NewData1),1,2)
View(NewData1)
NewData%>%mutate_at(vars(contains("USD/")),funs(1/.))->NewData1
NewData1
NewData1%>%mutate_at(vars(contains("USD/")),funs(colnames(NewData1)<-str_sub(colnames(NewData1),1,2)))
NewData1%>%mutate_at(vars(contains("USD/")),funs(colnames(.)<-str_sub(colnames(NewData1),1,2)))
?if
?when
if (colnames(NewData1))=`新台幣NTD/USD`
colnames(NewData1)<-str_sub(colnames(NewData1),1,2)}
colnames(NewData1)="`新台幣NTD/USD`"
colnames(NewData1)="`新台幣NTD/USD`"
NewData%>%mutate_at(vars(contains("USD/")),funs(1/.))->NewData1
colnames(NewData1)=="`新台幣NTD/USD`"
colnames(NewData1)==`新台幣NTD/USD`
colnames(NewData1)==`新台幣NTD/USD`
colnames(NewData1)=="新台幣NTD/USD"
colnames(NewData1)==contains("新台幣NTD/USD")
?contains
"新台幣NTD/USD"
colnames(NewData1)=="新台幣NTD/USD"
colnames(NewData1)=="/USD"
colnames(NewData1)<="/USD"
colnames(NewData1)>="/USD"
View(NewData1)
colnames(NewData1)>="新台幣NTD/USD"
colnames(NewData1)>="新台幣NTD"
colnames(NewData1)>="USD"
colnames(NewData1)>="USDm"
colnames(NewData1)>"USDm"
colnames(NewData1)<"USD"
colnames(NewData1)=<"USD"
colnames(NewData1)<="USD"
colnames(NewData1)=="USD"
NewData1%>%mutate_at(vars(contains("USD/")),colnames(NewData1)<-str_sub(colnames(NewData1),1,2))
?replace
replace(colnames(NewData1),which(colnames(contains("USD/"))),str_sub(colnames(NewData1),1,2))
replace(colnames(NewData1),which(contains("USD/")),str_sub(colnames(NewData1),1,2))
replace(colnames(NewData1),1,str_sub(colnames(NewData1),1,2))
replace(colnames(NewData1),2,str_sub(colnames(NewData1),1,2))
replace(colnames(NewData1),4,str_sub(colnames(NewData1),1,2))
?str_locate
str_locate(NewData1,"USD/")
str_locate(colnames(NewData1),"USD/")
colnames(NewData1)[3]<-str_sub(colnames(NewData1),1,2)
colnames(NewData1)<-str_sub(colnames(NewData1),1,2)
NewData%>%mutate_at(vars(contains("USD/")),funs(1/.))->NewData1
NewData1
str_sub(colnames(NewData1),1,2)
str_sub(colnames(NewData1)[4],1,2)
str_locate(colnames(NewData1),"USD/")
colnames(NewData1)[4]<-str_sub(colnames(NewData1)[4],1,2)
str_locate(colnames(NewData1),"USD/")
str_sub(colnames(NewData1)[4,10],1,2)
str_sub(colnames(NewData1)[4],1,2)
str_sub(colnames(NewData1)[4,5],1,2)
x=4,10,
str_locate(colnames(NewData1),"USD/")
x=4,10,15
x=4 10 15
x=c(4 10 15)
x=c(4,10 15)
x=c(4,10,15)
str_sub(colnames(NewData1)[x],1,2)
column(str_locate(colnames(NewData1),"USD/"))
which(colnames(NewData1)[str_locate(colnames(NewData1),"USD/")]=="USD/")
colnames(NewData1)[str_locate(colnames(NewData1),"USD/")]
str_locate(colnames(NewData1),"USD/")
str_locate(colnames(NewData1),"USD/")
x=c(4,10,15)
colnames(NewData1)[x]<-str_sub(colnames(NewData1)[x],1,2)
colnames(NewData1)[4 10 15]<-str_sub(colnames(NewData1)[4 10 15],1,2)
library(readr)
gsHW2ws <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/gsHW2ws.csv")
mean(gsHW2ws$ans1,na.rm=TRUE)
library(stringr)
which(str_sub(colnames(gsHW2ws),1,3)=="ans")
colMeans(gsHW2ws[which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=T)
gsHW2ws$"答對率"<-rowSums(gsHW2ws[which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)/5
gsHW2ws$"成績"<-5+gsHW2ws$"答對率"*5
which(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)!=max(colSums(gsHW2ws[which(gsHW2ws$"成績"==9),which(str_sub(colnames(gsHW2ws),1,3)=="ans")],na.rm=TRUE)))
correct<-gsHW2ws[which(gsHW2ws$"成績"==8),]
c<-colMeans(correct[which(str_sub(colnames(correct),1,3)=="ans")],na.rm=T)
which(c<0.5)
library(readr)
allBankData <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/allBankData.csv")
library(lubridate)
allBankData$"年月"<-str_c("1",allBankData$"年月","/01")
allBankData$"年月"<-ymd(allBankData$"年月")
allBankData$"年月"<-allBankData$"年月"+years(911)
library(dplyr)
mutate(allBankData,"銀行"=as.factor(`銀行`),"年月"=as.Date.factor(`年月`),
`定存利率-三個月-固定`=as.numeric(`定存利率-三個月-固定`,                        `定存利率-一年期-固定`=as.numeric(`定存利率-一年期-固定`)))->allBankData
library(readr)
exData <- read_csv("https://quality.data.gov.tw/dq_download_csv.php?nid=6563&md5_url=9f65bdb6752389dc713acc27e93c1c38")
exData%>%mutate_at(vars("期間"),funs(as.factor(.)))->NewData
NewData%>%mutate_at(vars(contains("USD")),funs(as.numeric(.)))->NewData
NewData
NewData%>%mutate_at(vars(contains("USD/")),funs(1/.))->NewData1
NewData1
str_locate(colnames(NewData1),"USD/")
x=c(4,10,15)
colnames(NewData1)[x]<-str_sub(colnames(NewData1)[x],1,2)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr); library(stringr); library(lubridate); library(purrr)
library(readr)
classSurvey <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/classSurvey.csv")
hwGrades <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/hwGrades.csv")
classSurvey%>%mutate('性別'=as.factor(性別),'入學年'=str_sub(學號,2,4),
'團隊活動'=str_detect(`課外活動`,"團隊活動"))->classSurvey
classSurvey%>%group_by(性別)%>%
summarise('人數'=n(),
'參加團隊活動人數'=sum(團隊活動),
'參加團隊活動比例'=sum(團隊活動)/n())
is_hot<- function(temperature){
ifelse(temperature>30, "熱", "宜人")
}
is_hot(28)
is_hot(35)
na2zero<-function(x){
ifelse(is.na(x),0,x)
}
hwGrades%>%mutate(hw1=na2zero(hw1),hw2=na2zero(hw2),Exercise3=na2zero(Exercise3))->hwGrades
band_members
band_instruments
band_members %>%
left_join(band_instruments,by=c("name"))
hwGrades%>%left_join(classSurvey,by=c("學號"))->hwGrades
hwGrades%>%mutate('作業平均成績'=(hw1+hw2+Exercise3)/3)->hwGrades
hwGrades%>%group_by(性別)%>%summarise('平均作業平均成績'=mean(作業平均成績))
knitr::opts_chunk$set(echo = TRUE)
library(dplyr); library(stringr); library(lubridate); library(purrr)
library(readr)
classSurvey <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/classSurvey.csv")
hwGrades <- read_csv("https://raw.githubusercontent.com/tpemartin/github-data/master/hwGrades.csv")
classSurvey%>%mutate('性別'=as.factor(性別),'入學年'=str_sub(學號,2,4),
'團隊活動'=str_detect(`課外活動`,"團隊活動"))->classSurvey
classSurvey%>%group_by(性別)%>%
summarise('人數'=n(),
'參加團隊活動人數'=sum(團隊活動),
'參加團隊活動比例'=sum(團隊活動)/n())
na2zero<-function(x){
ifelse(is.na(x),0,x)
}
hwGrades%>%mutate(hw1=na2zero(hw1),hw2=na2zero(hw2),Exercise3=na2zero(Exercise3))->hwGrades
hwGrades%>%left_join(classSurvey,by=c("學號"))->hwGrades
hwGrades%>%mutate('作業平均成績'=(hw1+hw2+Exercise3)/3)->hwGrades
hwGrades%>%group_by(性別)%>%summarise('平均作業平均成績'=mean(作業平均成績))
